<%- include('../includes/head.ejs', { 
    username: username, 
    permisos: permisos, 
    rol: rol }) 
    %>

<script type="text/javascript" src="/js/modal_popup.js"></script>

<style>
    input:focus {
        border: 2px solid #910106 !important
    }

    input:hover {
        border: 2px solid #5a6581 !important;
    }

    .table-container {
        position: relative;
    }

    .pagination-container {
        margin-top: 20px;
    }

    .pagination-btn {
        margin: 0 5px;
    }
</style>

<section class="section">

    <div class="columns">
        <div class="column is-6">
            <h3 class="title is-3">Diplomados</h3>
        </div>
        <% if (contienePermiso(permisos, 'Registrar diplomado') == true) { %>
        <div class="column is-offset-2">
            <p class="control">
                <a class="button is-rounded is-responsive" style="font-size: large;"
                    href="/diplomado/registrar_diplomado">
                    <span class="icon is-large">
                        <i class="fa-solid fa-circle-plus"></i>
                    </span>
                    <span>
                        Registrar Diplomado
                    </span>
                </a>
            </p>
        </div>
        <% } %>
    </div>
    <input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>">

    <div class="tabs is-boxed">
        <ul>
            <li class="is-active" id="nav_activos">
                <a onclick="diplomados_activos()">
                    <span class="icon is-small"><i class="fa-solid fa-users"></i></span>
                    <span>Diplomados Activos</span>
                </a>
            </li>
            <li id="nav_no_activos">
                <a onclick="diplomados_no_activos()">
                    <span class="icon is-small"><i class="fa-regular fa-users-slash"></i></span>
                    <span>Diplomados No Activos</span>
                </a>
            </li>
            <li id="nav_en_curso">
                <a onclick="diplomados_en_curso()">
                    <span class="icon is-small"><i class="fa-solid fa-clock-rotate-left"></i></span>
                    <span>Diplomados en Curso</span>
                </a>
            </li>
        </ul>
    </div>

    <div id="diplomados_activos">
        <% let count_activos = 0 %>

        <% if (diplomadosActivos.length === 0) { %>
        <div class="columns">
            <div class="column is-2"></div>
            <div class="column is-8">
                <div class="notification" style="background-color: #5a6581; color:#ffffff;">
                    No hay diplomados que se encuenten activos por el momento.
                </div>
            </div>
        </div>
        <% } else { %>
        <div id="tablaActivos" class="table-container">
            <table class="table is-bordered is-hoverable is-fullwidth">
                <thead>
                    <tr>
                    <tr>
                        <th>
                            <p class="is-size-5"><strong>Nombre: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>ID: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>Duración: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>Precio: </strong></p>
                        </th>
                        <% if (contienePermiso(permisos, 'Modificar diplomado') == true) { %>
                        <th>
                            
                        </th>
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% for (let diplomado of diplomadosActivos) { %>
                    <tr id="pagination-content">
                        <td>
                            <%= diplomado.nombreDiplomado %>
                        </td>
                        <td>
                            <%= diplomado.IDDiplomado %>
                        </td>
                        <td>
                            <%= diplomado.Duracion %>
                        </td>
                        <td>
                            $<%= diplomado.precioDiplomado.toLocaleString('mx', {
                                                    minimumFractionDigits: 2,
                                                    maximumFractionDigits: 2
                                                 }) %>
                        </td>
                        <% if (contienePermiso(permisos, 'Modificar diplomado') == true) { %>
                        <td>
                            <form action="/diplomado/editar_diplomado" method="POST">
                                <input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>">
                                <input type="hidden" value="<%= diplomado.nombreDiplomado %>" name="nombre" id="nombre">
                                <button class="button is-rounded is-small is-responsive" type="sumbit">
                                    <span>
                                        Modificar
                                    </span>
                                    <span class="icon is-large">
                                        <i class="fa-solid fa-circle-chevron-right" style="color: #ffffff;"></i>
                                    </span>
                                </button>
                            </form>
                        </td>
                        <% } %>
                    </tr>
                    <% count_activos++ %>
                    <% } %>
                </tbody>
            </table>
            <nav class="pagination is-rounded" role="navigation" aria-label="pagination">
                <a class="pagination-previous" id="prev-button">Anterior</a>
                <a class="pagination-next" id="next-button">Siguiente</a>
                <ul class="pagination-list" id="pagination-list">
                    <div id="pagination-numbers">
                    </div>
                </ul>
            </nav>
        </div>
        <% } %>
    </div>

    <div id="diplomados_no_activos" class="is-hidden">
        <% let count_no_activo = 0 %>

        <% if (diplomadosNoActivos.length===0) { %>
        <div class="columns">
            <div class="column is-2"></div>
            <div class="column is-8">
                <div class="notification" style="background-color: #5a6581; color:#ffffff;">
                    No hay diplomados que se encuentran desactivados por el momento.
                </div>
            </div>
        </div>
        <% } else { %>
        <div id="tablaNoActivos" class="table-container">
            <table class="table is-bordered is-hoverable is-fullwidth">
                <thead>
                    <tr>
                    <tr>
                        <th>
                            <p class="is-size-5"><strong>Nombre: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>ID: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>Duración: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>Precio: </strong></p>
                        </th>
                        <% if (contienePermiso(permisos, 'Modificar diplomado') == true) { %>
                        <th>

                        </th>
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% for (let diplomado of diplomadosNoActivos) { %>
                    <tr id="pagination-content-2">
                        <td>
                            <%= diplomado.nombreDiplomado %>
                        </td>
                        <td>
                            <%= diplomado.IDDiplomado %>
                        </td>
                        <td>
                            <%= diplomado.Duracion %>
                        </td>
                        <td>
                            $<%= diplomado.precioDiplomado.toLocaleString('mx', {
                                                    minimumFractionDigits: 2,
                                                    maximumFractionDigits: 2
                                                 }) %>
                        </td>
                        <% if (contienePermiso(permisos, 'Modificar diplomado') == true) { %>
                        <td>
                            <form action="/diplomado/editar_diplomado" method="POST">
                                <input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>">
                                <input type="hidden" value="<%= diplomado.nombreDiplomado %>" name="nombre" id="nombre">
                                <button class="button is-rounded is-small is-responsive" type="sumbit">
                                    <span>
                                        Modificar
                                    </span>
                                    <span class="icon is-large">
                                        <i class="fa-solid fa-circle-chevron-right" style="color: #ffffff;"></i>
                                    </span>
                                </button>
                            </form>
                        </td>
                        <% } %>
                    </tr>
                    <% count_activos++ %>
                    <% } %>
                </tbody>
            </table>
            <nav class="pagination is-rounded" role="navigation" aria-label="pagination">
                <a class="pagination-previous" id="prev-button-2">Anterior</a>
                <a class="pagination-next" id="next-button-2">Siguiente</a>
                <ul class="pagination-list" id="pagination-list-2">
                    <div id="pagination-numbers-2">

                    </div>
                </ul>
            </nav>
        </div>
        <% } %>
    </div>

    <div id="diplomados_en_curso" class="is-hidden">
        <% let count_en_curso = 0 %>

        <% if (diplomadosProgreso.length===0) { %>
            <div class="columns">
                <div class="column is-2"></div>
                <div class="column is-8">
                    <div class="notification" style="background-color: #5a6581; color:#ffffff;">
                        No hay diplomados que se esten cursando por el momento. 
                    </div>
                </div>
            </div>
        <% } else { %>
        <div id="tablaEnCurso" class="table-container">
            <table class="table is-bordered is-hoverable is-fullwidth">
                <thead>
                    <tr>
                    <tr>
                        <th>
                            <p class="is-size-5"><strong>Nombre: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>ID: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>Duración: </strong></p>
                        </th>
                        <th>
                            <p class="is-size-5"><strong>Precio: </strong></p>
                        </th>
                        <% if (contienePermiso(permisos, 'Modificar diplomado') == true) { %>
                        <th>

                        </th>
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% for (let diplomado of diplomadosProgreso) { %>
                    <tr id="pagination-content-3">
                        <td>
                            <%= diplomado.nombreDiplomado %>
                        </td>
                        <td>
                            <%= diplomado.IDDiplomado %>
                        </td>
                        <td>
                            <%= diplomado.Duracion %>
                        </td>
                        <td>
                            $<%= diplomado.precioDiplomado.toLocaleString('mx', {
                                                    minimumFractionDigits: 2,
                                                    maximumFractionDigits: 2
                                                 }) %>
                        </td>
                        <% if (contienePermiso(permisos, 'Modificar diplomado') == true) { %>
                        <td>
                            <form action="/diplomado/editar_diplomado" method="POST">
                                <input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>">
                                <input type="hidden" value="<%= diplomado.nombreDiplomado %>" name="nombre" id="nombre">
                                <button class="button is-rounded is-small is-responsive" type="sumbit">
                                    <span>
                                        Modificar
                                    </span>
                                    <span class="icon is-large">
                                        <i class="fa-solid fa-circle-chevron-right" style="color: #ffffff;"></i>
                                    </span>
                                </button>
                            </form>
                        </td>
                        <% } %>
                    </tr>
                    <% count_activos++ %>
                    <% } %>
                </tbody>
            </table>
            <nav class="pagination is-rounded" role="navigation" aria-label="pagination">
                <a class="pagination-previous" id="prev-button-3">Anterior</a>
                <a class="pagination-next" id="next-button-3">Siguiente</a>
                <ul class="pagination-list" id="pagination-list-3">
                    <div id="pagination-numbers-3">

                    </div>
                </ul>
            </nav>
        </div>
        <% } %>
    </div>

</section>
<script type="text/javascript" src="/js/consultar_diplomado.js"></script>
<script type="text/javascript" src="/js/pagination.js"></script>
<script type="text/javascript" src="/js/pagination2.js"></script>
<script type="text/javascript" src="/js/pagination3.js"></script>

</html>