<%- include('../includes/head.ejs', {
    username: username,
    permisos: permisos,
    rol: rol
}) %>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<style>
    .select_anio:hover {
        border: 2px solid #5a6581 !important;
    }
    
    .select_anio:focus {
        border: 2px solid #910106 !important;
    }
    </style>

<section class="section">
     <div class="container">
         <input type="hidden" id="_csrf" value="<%= csrfToken %>">
         <div class="columns">
             <div class="column is-6">
                 <h3 class="title is-3">Precio Crédito</h3>
             </div>
             <% if (contienePermiso(permisos, 'Registrar Costo Credito') == true) { %>
             <div class="column is-offset-1">
                 <p class="control">
                     <a class="button is-rounded is-responsive" style="font-size: large;"
                         href="/configuracion/registrar_precio_credito">
                         <span class="icon is-large">
                             <i class="fa-solid fa-circle-plus"></i>
                         </span>
                         <span>
                             Registrar Precio Crédito
                         </span>
                     </a>
                 </p>
             </div>
             <% } %>
         </div>

         <div class="column">
            <div class="columns is-vcentered" style="text-align: center;">
                <div class="column">
                    <label class="label is-size-5" for="anio" style="display: inline-block;
                        width: 150px; text-align: right; padding-right:3px; padding-top: 0.2em;">Año:</label>
                    <div class="select">
                        <select class="select_anio" name="anio" id="anio" style="border: 2px solid #7c7f80; margin-bottom: -2em;">
                            <% anios.forEach(anio => { %>
                                <option value="<% anio['year(fechaModificacion)'] %>"><%= anio['year(fechaModificacion)'] %></option>
                                <% }); %>
                        </select>
                    </div>
                </div>
            </div>
        </div>

         <table class="table is-bordered is-hoverable is-fullwidth">
             <thead>
                 <tr>
                     <th>
                         <p class="is-size-5">
                             <strong>Monto: </strong>
                         </p>
                     </th>
                     <th>
                         <p class="is-size-5">
                             <strong>Fecha de Registro: </strong>
                         </p>
                     </th>
                 </tr>
             </thead>
             <tbody>
                 <td>
                     <div class="column">
                         $ <%= precio_actual[0].precioPesos %>
                     </div>
                 </td>
                 <td>
                     <% let options = { year: 'numeric', month: 'long', day: 'numeric' }; %>
                     <div class="column">
                         <%= new Date(precio_actual[0].fechaModificacion).toLocaleDateString("es-MX", options) %>
                     </div>
                 </td>
             </tbody>
         </table>
     </div>
</section>
